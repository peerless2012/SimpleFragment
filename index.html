<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Simplefragment by peerless2012</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Simplefragment</h1>
        <h2>Android中对于Fragment的更优雅的使用方式以及数据传递。</h2>
        <a href="https://github.com/peerless2012/SimpleFragment" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <hr>

<h1>
<a id="simplefragment" class="anchor" href="#simplefragment" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>SimpleFragment</h1>

<p>Android中对于Fragment的更优雅的使用方式以及数据传递。</p>

<h2>
<a id="以tab的方式切换fragment" class="anchor" href="#%E4%BB%A5tab%E7%9A%84%E6%96%B9%E5%BC%8F%E5%88%87%E6%8D%A2fragment" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>以TAB的方式切换Fragment</h2>

<ul>
<li>查找要显示的Fragment</li>
<li>如果不存在则创建新的并添加（add）进去</li>
<li>
<p>如果已经存在，则隐藏当前的Fragment,显示找到的Fragment</p>

<pre><code>private Fragment preFragment;
private void changeFragment(String fragmentName,String tag,Bundle data) {
     FragmentManager fragmentManager = getSupportFragmentManager();
     Fragment currentFragment = fragmentManager.findFragmentByTag(tag);
     if (currentFragment != null &amp;&amp; currentFragment == preFragment) return;
    FragmentTransaction transaction = fragmentManager.beginTransaction();
    if (currentFragment == null) {
        currentFragment = Fragment.instantiate(this, fragmentName, data);
        transaction.add(R.id.fragment_content, currentFragment, tag);
        if (preFragment != null) {
            transaction.hide(preFragment);
        }
    }else {
        transaction.hide(preFragment);
        transaction.show(currentFragment);
    }
    preFragment = currentFragment;
    transaction.commit();
}
</code></pre>

<p>切换的时候</p>

<pre><code>  Bundle bundle3 = new Bundle();
  bundle3.putString(TabFragment1.CONTENT, "这是传递给第三个TabFragment的数据");
  changeFragment(TabFragment3.class.getName(),TabFragment3.TAG, bundle3);
</code></pre>
</li>
</ul>

<h2>
<a id="以加入到后退栈的方式切换fragment" class="anchor" href="#%E4%BB%A5%E5%8A%A0%E5%85%A5%E5%88%B0%E5%90%8E%E9%80%80%E6%A0%88%E7%9A%84%E6%96%B9%E5%BC%8F%E5%88%87%E6%8D%A2fragment" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>以加入到后退栈的方式切换Fragment</h2>

<ul>
<li>以全屏的方式展示Fragment</li>
<li>加到回退栈中，模拟Activity的栈结构</li>
</ul>

<h2>
<a id="关于layoutinflater中的inflate方法的介绍" class="anchor" href="#%E5%85%B3%E4%BA%8Elayoutinflater%E4%B8%AD%E7%9A%84inflate%E6%96%B9%E6%B3%95%E7%9A%84%E4%BB%8B%E7%BB%8D" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>关于LayoutInflater中的inflate方法的介绍</h2>

<pre><code>        public View inflate(@LayoutRes int resource, @Nullable ViewGroup root, boolean attachToRoot)
</code></pre>

<ul>
<li>resource 布局资源的ID</li>
<li>root 把resource填充成View的时候参考的父布局

<ul>
<li>如果这个参数为空，那么把resource填充成view的时候，根元素的宽高等参数会不起作用，取而代之的是默认的参数（比如布局里面设置宽高是填充屏幕，但是加载的时候实际是包裹内容，即使把宽高这是成很高很高，也是没有什么卵用的）</li>
<li>如果传递的父View，那么填充的时候就会正常填充根元素的属性，不会出现异常。</li>
</ul>
</li>
<li>attachToRoot 是否把填充的View添加到root上

<ul>
<li>在Fragment的onCreate方法中这个参数应该为false，我们应该返回填充的View，让Fragment自己去添加（在ListView中，Adapter的getView方法中，也是一样的道理，填充的时候设置为false，然后返回给ListView，让ListView自己去添加）。</li>
<li>在自定义ViewGroup的时候，这个可以设置为true，这样就不用自己手动去addView了。</li>
</ul>
</li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/peerless2012/SimpleFragment/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/peerless2012/SimpleFragment/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/peerless2012/SimpleFragment"></a> is maintained by <a href="https://github.com/peerless2012">peerless2012</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
